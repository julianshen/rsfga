============================================================
RSFGA Compatibility Test Report - cockroachdb
URL: http://localhost:30082
Timestamp: 2026年 1月17日 星期六 09時43分41秒 CST
============================================================


--- test_section_1 ---

running 6 tests
test test_can_clean_up_test_stores ... FAILED
test test_can_connect_to_openfga_grpc_api ... FAILED
test test_can_connect_to_openfga_http_api ... FAILED
test test_can_create_store_via_api ... FAILED
test test_can_start_openfga_via_docker_compose ... FAILED
test test_environment_teardown_is_idempotent ... FAILED

failures:

---- test_can_clean_up_test_stores stdout ----

thread 'test_can_clean_up_test_stores' (1762617) panicked at crates/compatibility-tests/tests/test_section_1.rs:62:58:
CARGO_MANIFEST_DIR not set: NotPresent
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_can_connect_to_openfga_grpc_api stdout ----

thread 'test_can_connect_to_openfga_grpc_api' (1762618) panicked at crates/compatibility-tests/tests/test_section_1.rs:62:58:
CARGO_MANIFEST_DIR not set: NotPresent

---- test_can_connect_to_openfga_http_api stdout ----

thread 'test_can_connect_to_openfga_http_api' (1762619) panicked at crates/compatibility-tests/tests/test_section_1.rs:62:58:
CARGO_MANIFEST_DIR not set: NotPresent

---- test_can_create_store_via_api stdout ----

thread 'test_can_create_store_via_api' (1762620) panicked at crates/compatibility-tests/tests/test_section_1.rs:62:58:
CARGO_MANIFEST_DIR not set: NotPresent

---- test_can_start_openfga_via_docker_compose stdout ----

thread 'test_can_start_openfga_via_docker_compose' (1762621) panicked at crates/compatibility-tests/tests/test_section_1.rs:62:58:
CARGO_MANIFEST_DIR not set: NotPresent

---- test_environment_teardown_is_idempotent stdout ----

thread 'test_environment_teardown_is_idempotent' (1762622) panicked at crates/compatibility-tests/tests/test_section_1.rs:62:58:
CARGO_MANIFEST_DIR not set: NotPresent


failures:
    test_can_clean_up_test_stores
    test_can_connect_to_openfga_grpc_api
    test_can_connect_to_openfga_http_api
    test_can_create_store_via_api
    test_can_start_openfga_via_docker_compose
    test_environment_teardown_is_idempotent

test result: FAILED. 0 passed; 6 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

--- test_section_10_check_basic ---

running 10 tests
test test_check_direct_relation ... FAILED
test test_check_follows_computed_exclusion ... FAILED
test test_check_follows_computed_intersection ... FAILED
test test_check_follows_computed_union ... FAILED
test test_check_resolves_this_keyword ... FAILED
test test_check_returns_false_when_tuple_does_not_exist ... ok
test test_check_returns_true_when_tuple_exists ... FAILED
test test_check_with_contextual_tuples ... FAILED
test test_check_with_invalid_format ... FAILED
test test_check_with_nonexistent_store ... ok

failures:

---- test_check_direct_relation stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_follows_computed_exclusion stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_follows_computed_intersection stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_follows_computed_union stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_resolves_this_keyword stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_returns_true_when_tuple_exists stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_with_contextual_tuples stdout ----

thread 'test_check_with_contextual_tuples' (1762682) panicked at crates/compatibility-tests/tests/test_section_10_check_basic.rs:514:5:
assertion `left == right` failed: Check should consider contextual_tuples
  left: Some(false)
 right: Some(true)
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_check_with_invalid_format stdout ----

thread 'test_check_with_invalid_format' (1762686) panicked at crates/compatibility-tests/tests/test_section_10_check_basic.rs:583:5:
assertion `left == right` failed: Invalid check format should return 400, got: 422 Unprocessable Entity
  left: 422
 right: 400


failures:
    test_check_direct_relation
    test_check_follows_computed_exclusion
    test_check_follows_computed_intersection
    test_check_follows_computed_union
    test_check_resolves_this_keyword
    test_check_returns_true_when_tuple_exists
    test_check_with_contextual_tuples
    test_check_with_invalid_format

test result: FAILED. 2 passed; 8 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.31s

--- test_section_11_check_complex ---

running 8 tests
test test_check_cycle_detection ... FAILED
test test_check_deeply_nested_relations ... FAILED
test test_check_exclusion_but_not ... FAILED
test test_check_intersection_all_required ... FAILED
test test_check_multi_hop_relations ... FAILED
test test_check_respects_model_version ... FAILED
test test_check_union_multiple_relations ... FAILED
test test_check_with_wildcards ... FAILED

failures:

---- test_check_cycle_detection stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_deeply_nested_relations stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_exclusion_but_not stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_intersection_all_required stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_multi_hop_relations stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_respects_model_version stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_union_multiple_relations stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_with_wildcards stdout ----
Error: Failed to write tuples: 500 Internal Server Error


failures:
    test_check_cycle_detection
    test_check_deeply_nested_relations
    test_check_exclusion_but_not
    test_check_intersection_all_required
    test_check_multi_hop_relations
    test_check_respects_model_version
    test_check_union_multiple_relations
    test_check_with_wildcards

test result: FAILED. 0 passed; 8 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.27s

--- test_section_12_batch_check ---

running 6 tests
test test_batch_check_deduplication ... FAILED
test test_batch_check_empty_array ... ok
test test_batch_check_large_batch ... FAILED
test test_batch_check_mixed_results ... FAILED
test test_batch_check_multiple_tuples ... FAILED
test test_batch_check_preserves_order ... FAILED

failures:

---- test_batch_check_deduplication stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_batch_check_large_batch stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_batch_check_mixed_results stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_batch_check_multiple_tuples stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_batch_check_preserves_order stdout ----
Error: Failed to write tuples: 500 Internal Server Error


failures:
    test_batch_check_deduplication
    test_batch_check_large_batch
    test_batch_check_mixed_results
    test_batch_check_multiple_tuples
    test_batch_check_preserves_order

test result: FAILED. 1 passed; 5 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.24s

--- test_section_13_check_performance ---

running 5 tests
test test_check_consistency_after_delete ... FAILED
test test_check_consistency_after_write ... FAILED
test test_check_latency_computed_union ... FAILED
test test_check_latency_deep_nested ... FAILED
test test_check_latency_direct_relation ... FAILED

failures:

---- test_check_consistency_after_delete stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_consistency_after_write stdout ----

thread 'test_check_consistency_after_write' (1762883) panicked at crates/compatibility-tests/tests/test_section_13_check_performance.rs:340:5:
Write should succeed
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_check_latency_computed_union stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_latency_deep_nested stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_latency_direct_relation stdout ----
Error: Failed to write tuples: 500 Internal Server Error


failures:
    test_check_consistency_after_delete
    test_check_consistency_after_write
    test_check_latency_computed_union
    test_check_latency_deep_nested
    test_check_latency_direct_relation

test result: FAILED. 0 passed; 5 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.23s

--- test_section_14_expand_api ---

running 9 tests
test test_expand_includes_difference_branches ... FAILED
test test_expand_includes_intersection_branches ... FAILED
test test_expand_includes_union_branches ... FAILED
test test_expand_returns_relation_tree ... FAILED
test test_expand_shows_computed_relations ... FAILED
test test_expand_shows_direct_relations_as_leaf ... FAILED
test test_expand_tree_is_deterministic ... FAILED
test test_expand_with_invalid_store ... FAILED
test test_expand_with_nonexistent_object ... FAILED

failures:

---- test_expand_includes_difference_branches stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_expand_includes_intersection_branches stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_expand_includes_union_branches stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_expand_returns_relation_tree stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_expand_shows_computed_relations stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_expand_shows_direct_relations_as_leaf stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_expand_tree_is_deterministic stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_expand_with_invalid_store stdout ----

thread 'test_expand_with_invalid_store' (1762945) panicked at crates/compatibility-tests/tests/test_section_14_expand_api.rs:619:5:
Expand with non-existent store should return 404 or 400, got: 422 Unprocessable Entity
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_expand_with_nonexistent_object stdout ----

thread 'test_expand_with_nonexistent_object' (1762947) panicked at crates/compatibility-tests/tests/test_section_14_expand_api.rs:517:5:
Expand should succeed even for non-existent object, got: 422 Unprocessable Entity


failures:
    test_expand_includes_difference_branches
    test_expand_includes_intersection_branches
    test_expand_includes_union_branches
    test_expand_returns_relation_tree
    test_expand_shows_computed_relations
    test_expand_shows_direct_relations_as_leaf
    test_expand_tree_is_deterministic
    test_expand_with_invalid_store
    test_expand_with_nonexistent_object

test result: FAILED. 0 passed; 9 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.27s

--- test_section_15_listobjects_api ---

running 7 tests
test test_listobjects_returns_accessible_objects ... FAILED
test test_listobjects_with_computed_relations ... FAILED
test test_listobjects_with_contextual_tuples ... FAILED
test test_listobjects_with_direct_relations ... FAILED
test test_listobjects_with_no_accessible_objects ... FAILED
test test_listobjects_with_type_filter ... FAILED
test test_listobjects_with_wildcards ... FAILED

failures:

---- test_listobjects_returns_accessible_objects stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_listobjects_with_computed_relations stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_listobjects_with_contextual_tuples stdout ----

thread 'test_listobjects_with_contextual_tuples' (1762991) panicked at crates/compatibility-tests/tests/test_section_15_listobjects_api.rs:477:5:
assertion `left == right` failed: Should return exactly the objects from contextual tuples
  left: {}
 right: {"document:doc2", "document:doc1"}
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_listobjects_with_direct_relations stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_listobjects_with_no_accessible_objects stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_listobjects_with_type_filter stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_listobjects_with_wildcards stdout ----
Error: Failed to write tuples: 500 Internal Server Error


failures:
    test_listobjects_returns_accessible_objects
    test_listobjects_with_computed_relations
    test_listobjects_with_contextual_tuples
    test_listobjects_with_direct_relations
    test_listobjects_with_no_accessible_objects
    test_listobjects_with_type_filter
    test_listobjects_with_wildcards

test result: FAILED. 0 passed; 7 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.22s

--- test_section_16_edge_cases ---

running 4 tests
test test_complex_nested_computed_relations ... FAILED
test test_expand_with_circular_relations ... FAILED
test test_expand_with_deep_relation_tree ... FAILED
test test_listobjects_with_large_result_set ... FAILED

failures:

---- test_complex_nested_computed_relations stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_expand_with_circular_relations stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_expand_with_deep_relation_tree stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_listobjects_with_large_result_set stdout ----
Error: Failed to write tuples: 500 Internal Server Error


failures:
    test_complex_nested_computed_relations
    test_expand_with_circular_relations
    test_expand_with_deep_relation_tree
    test_listobjects_with_large_result_set

test result: FAILED. 0 passed; 4 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.21s

--- test_section_17_error_format ---

running 6 tests
test test_400_bad_request_format ... FAILED
test test_404_not_found_format ... FAILED
test test_500_error_format_documentation ... ok
test test_error_codes_match_openfga_enum ... FAILED
test test_error_response_consistent_across_endpoints ... FAILED
test test_validation_errors_include_field_details ... FAILED

failures:

---- test_400_bad_request_format stdout ----

thread 'test_400_bad_request_format' (1763061) panicked at crates/compatibility-tests/tests/test_section_17_error_format.rs:36:5:
assertion `left == right` failed: Invalid store ID format should return 400
  left: 404
 right: 400
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_404_not_found_format stdout ----

thread 'test_404_not_found_format' (1763065) panicked at crates/compatibility-tests/tests/test_section_17_error_format.rs:108:5:
assertion `left == right` failed: Non-existent store should return store_id_not_found code
  left: "not_found"
 right: "store_id_not_found"

---- test_error_codes_match_openfga_enum stdout ----

thread 'test_error_codes_match_openfga_enum' (1763068) panicked at crates/compatibility-tests/tests/test_section_17_error_format.rs:279:5:
assertion `left == right` failed
  left: "not_found"
 right: "validation_error"

---- test_error_response_consistent_across_endpoints stdout ----
Error: error decoding response body

Caused by:
    missing field `code` at line 1 column 17

---- test_validation_errors_include_field_details stdout ----
Error: error decoding response body

Caused by:
    expected value at line 1 column 1


failures:
    test_400_bad_request_format
    test_404_not_found_format
    test_error_codes_match_openfga_enum
    test_error_response_consistent_across_endpoints
    test_validation_errors_include_field_details

test result: FAILED. 1 passed; 5 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.19s

--- test_section_18_rate_limiting ---

running 3 tests
test test_api_rate_limiting_behavior ... ok
test test_rate_limit_headers ... ok
test test_retry_after_header_format ... ok

test result: ok. 3 passed; 0 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.22s

--- test_section_19_consistency ---

running 4 tests
test test_check_during_model_update ... FAILED
test test_check_with_stale_model_id ... FAILED
test test_concurrent_writes_to_same_tuple ... FAILED
test test_read_after_write_consistency ... FAILED

failures:

---- test_check_during_model_update stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_with_stale_model_id stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_concurrent_writes_to_same_tuple stdout ----
Request 1 returned 500: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}
Request 4 returned 500: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}
Request 3 returned 500: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}
Request 6 returned 500: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}
Request 5 returned 500: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}
Request 0 returned 500: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}
Request 2 returned 500: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}
Request 9 returned 500: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}
Request 7 returned 500: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}
Request 8 returned 500: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}

thread 'test_concurrent_writes_to_same_tuple' (1763156) panicked at crates/compatibility-tests/tests/test_section_19_consistency.rs:159:5:
At least one concurrent write should succeed (got 0)
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_read_after_write_consistency stdout ----

thread 'test_read_after_write_consistency' (1763171) panicked at crates/compatibility-tests/tests/test_section_19_consistency.rs:257:9:
Write 0 should succeed


failures:
    test_check_during_model_update
    test_check_with_stale_model_id
    test_concurrent_writes_to_same_tuple
    test_read_after_write_consistency

test result: FAILED. 0 passed; 4 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.24s

--- test_section_2 ---

running 9 tests
test test_can_generate_authorization_models_with_computed_relations ... ok
test test_can_generate_authorization_models_with_direct_relations ... ok
test test_can_generate_authorization_models_with_intersection_relations ... ok
test test_can_generate_authorization_models_with_union_relations ... ok
test test_can_generate_models_with_deeply_nested_relations ... ok
test test_can_generate_valid_object_identifiers ... ok
test test_can_generate_valid_relation_names ... ok
test test_can_generate_valid_tuples ... ok
test test_can_generate_valid_user_identifiers ... ok

test result: ok. 9 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

--- test_section_20_limits ---

running 6 tests
test test_maximum_authorization_model_size ... FAILED
test test_maximum_checks_in_batch ... ok
test test_maximum_relation_depth ... FAILED
test test_maximum_tuple_size ... FAILED
test test_maximum_tuples_in_single_write ... FAILED
test test_request_timeout_behavior ... ok

failures:

---- test_maximum_authorization_model_size stdout ----

thread 'test_maximum_authorization_model_size' (1763230) panicked at crates/compatibility-tests/tests/test_section_20_limits.rs:409:5:
assertion `left == right` failed
  left: "validation_error"
 right: "type_definitions_too_few_items"
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_maximum_relation_depth stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_maximum_tuple_size stdout ----

thread 'test_maximum_tuple_size' (1763253) panicked at crates/compatibility-tests/tests/test_section_20_limits.rs:77:5:
Object with 256 chars should be accepted

---- test_maximum_tuples_in_single_write stdout ----

thread 'test_maximum_tuples_in_single_write' (1763255) panicked at crates/compatibility-tests/tests/test_section_20_limits.rs:167:5:
Writing 100 tuples should succeed


failures:
    test_maximum_authorization_model_size
    test_maximum_relation_depth
    test_maximum_tuple_size
    test_maximum_tuples_in_single_write

test result: FAILED. 2 passed; 4 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.28s

--- test_section_21_grpc_setup ---

running 6 tests
test test_can_call_authorization_model_service_methods ... FAILED
test test_can_call_check_service_methods ... FAILED
test test_can_call_store_service_methods ... FAILED
test test_can_call_tuple_service_methods ... FAILED
test test_can_connect_to_openfga_grpc_service ... FAILED
test test_grpc_reflection_works ... FAILED

failures:

---- test_can_call_authorization_model_service_methods stdout ----
Error: grpcurl failed: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"
 

---- test_can_call_check_service_methods stdout ----
Error: grpcurl failed: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"
 

---- test_can_call_store_service_methods stdout ----
Error: grpcurl failed: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"
 

---- test_can_call_tuple_service_methods stdout ----
Error: grpcurl failed: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"
 

---- test_can_connect_to_openfga_grpc_service stdout ----
Error: grpcurl list failed: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"


---- test_grpc_reflection_works stdout ----
Error: grpcurl describe failed: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"



failures:
    test_can_call_authorization_model_service_methods
    test_can_call_check_service_methods
    test_can_call_store_service_methods
    test_can_call_tuple_service_methods
    test_can_connect_to_openfga_grpc_service
    test_grpc_reflection_works

test result: FAILED. 0 passed; 6 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.10s

--- test_section_22_grpc_parity ---

running 9 tests
test test_grpc_batch_check_matches_rest ... FAILED
test test_grpc_check_matches_rest ... FAILED
test test_grpc_expand_matches_rest ... FAILED
test test_grpc_listobjects_matches_rest ... FAILED
test test_grpc_read_matches_rest ... FAILED
test test_grpc_store_create_matches_rest ... FAILED
test test_grpc_store_delete_matches_rest ... FAILED
test test_grpc_store_get_matches_rest ... FAILED
test test_grpc_write_matches_rest ... FAILED

failures:

---- test_grpc_batch_check_matches_rest stdout ----
Error: REST call failed with status 500 Internal Server Error: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}

---- test_grpc_check_matches_rest stdout ----
Error: REST call failed with status 500 Internal Server Error: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}

---- test_grpc_expand_matches_rest stdout ----
Error: REST call failed with status 500 Internal Server Error: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}

---- test_grpc_listobjects_matches_rest stdout ----
Error: REST call failed with status 500 Internal Server Error: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}

---- test_grpc_read_matches_rest stdout ----
Error: REST call failed with status 500 Internal Server Error: {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}

---- test_grpc_store_create_matches_rest stdout ----
Error: grpcurl failed: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"
 

---- test_grpc_store_delete_matches_rest stdout ----
Error: grpcurl failed: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"
 

---- test_grpc_store_get_matches_rest stdout ----
Error: grpcurl failed: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"
 

---- test_grpc_write_matches_rest stdout ----
Error: grpcurl failed: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"
 


failures:
    test_grpc_batch_check_matches_rest
    test_grpc_check_matches_rest
    test_grpc_expand_matches_rest
    test_grpc_listobjects_matches_rest
    test_grpc_read_matches_rest
    test_grpc_store_create_matches_rest
    test_grpc_store_delete_matches_rest
    test_grpc_store_get_matches_rest
    test_grpc_write_matches_rest

test result: FAILED. 0 passed; 9 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.29s

--- test_section_23_grpc_features ---

running 4 tests
test test_grpc_error_codes_match_http ... FAILED
test test_grpc_error_details_format ... FAILED
test test_grpc_metadata_headers ... FAILED
test test_grpc_streaming_not_supported ... FAILED

failures:

---- test_grpc_error_codes_match_http stdout ----

thread 'test_grpc_error_codes_match_http' (1763470) panicked at crates/compatibility-tests/tests/test_section_23_grpc_features.rs:236:5:
gRPC error should be InvalidArgument: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_grpc_error_details_format stdout ----

thread 'test_grpc_error_details_format' (1763484) panicked at crates/compatibility-tests/tests/test_section_23_grpc_features.rs:333:5:
Error should contain error code: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"


---- test_grpc_metadata_headers stdout ----

thread 'test_grpc_metadata_headers' (1763491) panicked at crates/compatibility-tests/tests/test_section_23_grpc_features.rs:170:5:
Request with custom headers should succeed: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"


---- test_grpc_streaming_not_supported stdout ----
Error: grpcurl describe failed: Failed to dial target host "localhost:30083": connection error: desc = "transport: error while dialing: dial tcp [::1]:30083: connect: connection refused"



failures:
    test_grpc_error_codes_match_http
    test_grpc_error_details_format
    test_grpc_metadata_headers
    test_grpc_streaming_not_supported

test result: FAILED. 0 passed; 4 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.19s

--- test_section_24_model_conditions ---

running 8 tests
test test_can_create_model_with_conditions ... ok
test test_can_retrieve_model_with_conditions ... ok
test test_condition_parameter_types ... ok
test test_condition_structure_name_expression_parameters ... ok
test test_condition_uses_cel_syntax ... ok
test test_invalid_condition_expression_returns_400 ... FAILED
test test_relation_references_condition ... ok
test test_undefined_condition_reference_returns_400 ... FAILED

failures:

---- test_invalid_condition_expression_returns_400 stdout ----

thread 'test_invalid_condition_expression_returns_400' (1763541) panicked at crates/compatibility-tests/tests/test_section_24_model_conditions.rs:463:5:
assertion `left == right` failed: Invalid CEL expression should return 400
  left: 201
 right: 400
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_undefined_condition_reference_returns_400 stdout ----

thread 'test_undefined_condition_reference_returns_400' (1763545) panicked at crates/compatibility-tests/tests/test_section_24_model_conditions.rs:519:5:
assertion `left == right` failed: Undefined condition reference should return 400
  left: 201
 right: 400


failures:
    test_invalid_condition_expression_returns_400
    test_undefined_condition_reference_returns_400

test result: FAILED. 6 passed; 2 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.24s

--- test_section_25_tuple_conditions ---

running 7 tests
test test_can_delete_tuple_with_condition ... FAILED
test test_can_write_multiple_tuples_with_different_conditions ... FAILED
test test_can_write_tuple_with_condition_context ... FAILED
test test_can_write_tuple_with_condition_name ... FAILED
test test_condition_context_values_match_types ... FAILED
test test_writing_tuple_with_mismatched_context_types_returns_400 ... FAILED
test test_writing_tuple_with_undefined_condition_returns_400 ... FAILED

failures:

---- test_can_delete_tuple_with_condition stdout ----

thread 'test_can_delete_tuple_with_condition' (1763571) panicked at crates/compatibility-tests/tests/test_section_25_tuple_conditions.rs:377:5:
Setup: Writing tuple with condition should succeed
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_can_write_multiple_tuples_with_different_conditions stdout ----

thread 'test_can_write_multiple_tuples_with_different_conditions' (1763579) panicked at crates/compatibility-tests/tests/test_section_25_tuple_conditions.rs:336:5:
Writing multiple tuples with different conditions should succeed, got: 500 Internal Server Error

---- test_can_write_tuple_with_condition_context stdout ----

thread 'test_can_write_tuple_with_condition_context' (1763581) panicked at crates/compatibility-tests/tests/test_section_25_tuple_conditions.rs:160:5:
Writing tuple with condition context should succeed, got: 500 Internal Server Error - {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}

---- test_can_write_tuple_with_condition_name stdout ----

thread 'test_can_write_tuple_with_condition_name' (1763583) panicked at crates/compatibility-tests/tests/test_section_25_tuple_conditions.rs:118:5:
Writing tuple with condition name should succeed, got: 500 Internal Server Error - {"code":"internal_error","message":"database query error: Failed to batch write tuples: error returned from database: at or near \"(\": syntax error"}

---- test_condition_context_values_match_types stdout ----

thread 'test_condition_context_values_match_types' (1763585) panicked at crates/compatibility-tests/tests/test_section_25_tuple_conditions.rs:202:5:
Writing tuple with matching context types should succeed, got: 500 Internal Server Error

---- test_writing_tuple_with_mismatched_context_types_returns_400 stdout ----

thread 'test_writing_tuple_with_mismatched_context_types_returns_400' (1763587) panicked at crates/compatibility-tests/tests/test_section_25_tuple_conditions.rs:285:5:
Writing tuple with mismatched context type should return 400 or succeed (with validation at check time), got: 500 Internal Server Error

---- test_writing_tuple_with_undefined_condition_returns_400 stdout ----

thread 'test_writing_tuple_with_undefined_condition_returns_400' (1763589) panicked at crates/compatibility-tests/tests/test_section_25_tuple_conditions.rs:240:5:
assertion `left == right` failed: Writing tuple with undefined condition should return 400
  left: 500
 right: 400


failures:
    test_can_delete_tuple_with_condition
    test_can_write_multiple_tuples_with_different_conditions
    test_can_write_tuple_with_condition_context
    test_can_write_tuple_with_condition_name
    test_condition_context_values_match_types
    test_writing_tuple_with_mismatched_context_types_returns_400
    test_writing_tuple_with_undefined_condition_returns_400

test result: FAILED. 0 passed; 7 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.25s

--- test_section_26_read_conditions ---

running 4 tests
test test_read_filter_tuples_by_condition ... FAILED
test test_read_returns_tuple_with_condition_context ... FAILED
test test_read_returns_tuple_with_condition_name ... FAILED
test test_tuple_response_format_matches_spec ... FAILED

failures:

---- test_read_filter_tuples_by_condition stdout ----

thread 'test_read_filter_tuples_by_condition' (1763615) panicked at crates/compatibility-tests/tests/test_section_26_read_conditions.rs:246:5:
Reading tuples should succeed
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_read_returns_tuple_with_condition_context stdout ----

thread 'test_read_returns_tuple_with_condition_context' (1763623) panicked at crates/compatibility-tests/tests/test_section_26_read_conditions.rs:164:5:
Setup: Writing tuple with condition context should succeed

---- test_read_returns_tuple_with_condition_name stdout ----

thread 'test_read_returns_tuple_with_condition_name' (1763625) panicked at crates/compatibility-tests/tests/test_section_26_read_conditions.rs:89:5:
Setup: Writing tuple with condition should succeed

---- test_tuple_response_format_matches_spec stdout ----

thread 'test_tuple_response_format_matches_spec' (1763627) panicked at crates/compatibility-tests/tests/test_section_26_read_conditions.rs:320:5:
Should have at least one tuple


failures:
    test_read_filter_tuples_by_condition
    test_read_returns_tuple_with_condition_context
    test_read_returns_tuple_with_condition_name
    test_tuple_response_format_matches_spec

test result: FAILED. 0 passed; 4 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.22s

--- test_section_27_check_conditions ---

running 12 tests
test test_batch_check_evaluates_conditions ... FAILED
test test_check_accepts_context_parameter ... ok
test test_check_returns_false_when_condition_evaluates_false ... ok
test test_check_returns_true_when_condition_evaluates_true ... FAILED
test test_check_with_partial_context_returns_error ... ok
test test_check_with_wrong_context_type_returns_error ... ok
test test_check_without_required_context_returns_error ... ok
test test_condition_evaluation_with_list_membership ... FAILED
test test_condition_evaluation_with_logical_operators ... FAILED
test test_condition_evaluation_with_string_operations ... FAILED
test test_condition_evaluation_with_timestamp_comparison ... FAILED
test test_contextual_tuples_with_conditions ... ok

failures:

---- test_batch_check_evaluates_conditions stdout ----

thread 'test_batch_check_evaluates_conditions' (1763654) panicked at crates/compatibility-tests/tests/test_section_27_check_conditions.rs:929:5:
assertion `left == right` failed: Conditional check with valid context should return true
  left: Some(false)
 right: Some(true)
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_check_returns_true_when_condition_evaluates_true stdout ----

thread 'test_check_returns_true_when_condition_evaluates_true' (1763662) panicked at crates/compatibility-tests/tests/test_section_27_check_conditions.rs:254:5:
assertion `left == right` failed: Check should return allowed: true when condition evaluates to true
  left: Some(false)
 right: Some(true)

---- test_condition_evaluation_with_list_membership stdout ----

thread 'test_condition_evaluation_with_list_membership' (1763671) panicked at crates/compatibility-tests/tests/test_section_27_check_conditions.rs:697:5:
assertion `left == right` failed: List membership check should return true when role is in list
  left: Some(false)
 right: Some(true)

---- test_condition_evaluation_with_logical_operators stdout ----

thread 'test_condition_evaluation_with_logical_operators' (1763673) panicked at crates/compatibility-tests/tests/test_section_27_check_conditions.rs:783:5:
assertion `left == right` failed: Admin user should pass via OR condition
  left: Some(false)
 right: Some(true)

---- test_condition_evaluation_with_string_operations stdout ----

thread 'test_condition_evaluation_with_string_operations' (1763675) panicked at crates/compatibility-tests/tests/test_section_27_check_conditions.rs:613:5:
assertion `left == right` failed: String equality should evaluate correctly
  left: Some(false)
 right: Some(true)

---- test_condition_evaluation_with_timestamp_comparison stdout ----

thread 'test_condition_evaluation_with_timestamp_comparison' (1763677) panicked at crates/compatibility-tests/tests/test_section_27_check_conditions.rs:555:5:
assertion `left == right` failed: Timestamp comparison should evaluate correctly
  left: Some(false)
 right: Some(true)


failures:
    test_batch_check_evaluates_conditions
    test_check_returns_true_when_condition_evaluates_true
    test_condition_evaluation_with_list_membership
    test_condition_evaluation_with_logical_operators
    test_condition_evaluation_with_string_operations
    test_condition_evaluation_with_timestamp_comparison

test result: FAILED. 6 passed; 6 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.31s

--- test_section_28_cel_edge_cases ---

running 8 tests
test test_cel_expression_division_by_zero ... ok
test test_cel_expression_timeout_behavior ... ok
test test_cel_expression_undefined_variable ... ok
test test_deeply_nested_map_values_in_context ... ok
test test_empty_context_no_required_params ... FAILED
test test_large_list_values_in_context ... FAILED
test test_null_values_in_context ... ok
test test_very_long_string_values_in_context ... ok

failures:

---- test_empty_context_no_required_params stdout ----

thread 'test_empty_context_no_required_params' (1763717) panicked at crates/compatibility-tests/tests/test_section_28_cel_edge_cases.rs:100:5:
Check with no required params should return allowed: true
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_large_list_values_in_context stdout ----

thread 'test_large_list_values_in_context' (1763719) panicked at crates/compatibility-tests/tests/test_section_28_cel_edge_cases.rs:416:9:
assertion `left == right` failed: Should find target in large list
  left: Some(false)
 right: Some(true)


failures:
    test_empty_context_no_required_params
    test_large_list_values_in_context

test result: FAILED. 6 passed; 2 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.26s

--- test_section_29_condition_performance ---

running 4 tests
test test_compare_conditional_vs_non_conditional_latency ... ok
test test_measure_batch_check_with_conditions ... ok
test test_measure_check_latency_complex_condition ... ok
test test_measure_check_latency_simple_condition ... ok

test result: ok. 4 passed; 0 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.33s

--- test_section_3 ---

running 8 tests
test test_can_capture_grpc_request_response_pairs ... ok
test test_can_capture_http_request_response_pairs ... ok
test test_can_compare_two_responses_for_equality ... ok
test test_can_detect_breaking_changes_in_arrays ... ok
test test_can_detect_breaking_changes_in_nested_objects ... ok
test test_can_detect_breaking_changes_in_response_format ... ok
test test_can_load_captured_test_cases_from_disk ... ok
test test_can_serialize_captured_data_to_json ... ok

test result: ok. 8 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

--- test_section_30_listusers_api ---

running 8 tests
test test_listusers_empty_result ... ok
test test_listusers_invalid_type_error ... ok
test test_listusers_nonexistent_store_error ... ok
test test_listusers_returns_users_with_direct_relation ... ok
test test_listusers_returns_wildcard ... ok
test test_listusers_with_computed_relations ... ok
test test_listusers_with_contextual_tuples ... ok
test test_listusers_with_userset_filter ... ok

test result: ok. 8 passed; 0 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.22s

--- test_section_31_readchanges_api ---

running 10 tests
test test_readchanges_chronological_order ... FAILED
test test_readchanges_continuation_token ... FAILED
test test_readchanges_empty_for_new_store ... FAILED
test test_readchanges_nonexistent_store_error ... ok
test test_readchanges_pagination_page_size ... FAILED
test test_readchanges_returns_tuple_writes ... FAILED
test test_readchanges_returns_writes_and_deletes ... FAILED
test test_readchanges_same_token_when_no_changes ... FAILED
test test_readchanges_type_filter_mismatch_with_token ... FAILED
test test_readchanges_with_type_filter ... FAILED

failures:

---- test_readchanges_chronological_order stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_readchanges_continuation_token stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_readchanges_empty_for_new_store stdout ----

thread 'test_readchanges_empty_for_new_store' (1763911) panicked at crates/compatibility-tests/tests/test_section_31_readchanges_api.rs:613:5:
assertion failed: response.status().is_success()
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_readchanges_pagination_page_size stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_readchanges_returns_tuple_writes stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_readchanges_returns_writes_and_deletes stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_readchanges_same_token_when_no_changes stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_readchanges_type_filter_mismatch_with_token stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_readchanges_with_type_filter stdout ----
Error: Failed to write tuples: 500 Internal Server Error


failures:
    test_readchanges_chronological_order
    test_readchanges_continuation_token
    test_readchanges_empty_for_new_store
    test_readchanges_pagination_page_size
    test_readchanges_returns_tuple_writes
    test_readchanges_returns_writes_and_deletes
    test_readchanges_same_token_when_no_changes
    test_readchanges_type_filter_mismatch_with_token
    test_readchanges_with_type_filter

test result: FAILED. 1 passed; 9 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.27s

--- test_section_32_assertions_api ---

running 9 tests
test test_assertions_invalid_model_id_error ... ok
test test_assertions_mixed_expectations ... FAILED
test test_assertions_nonexistent_store_error ... ok
test test_assertions_with_contextual_tuples ... FAILED
test test_read_assertions_returns_assertions ... FAILED
test test_read_assertions_when_none_exist ... FAILED
test test_write_assertions_creates_assertions ... FAILED
test test_write_assertions_replaces_existing ... FAILED
test test_write_empty_assertions ... FAILED

failures:

---- test_assertions_mixed_expectations stdout ----

thread 'test_assertions_mixed_expectations' (1763957) panicked at crates/compatibility-tests/tests/test_section_32_assertions_api.rs:811:5:
assertion failed: write_response.status().is_success()
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_assertions_with_contextual_tuples stdout ----

thread 'test_assertions_with_contextual_tuples' (1763961) panicked at crates/compatibility-tests/tests/test_section_32_assertions_api.rs:406:5:
WriteAssertions with contextual tuples should succeed

---- test_read_assertions_returns_assertions stdout ----

thread 'test_read_assertions_returns_assertions' (1763963) panicked at crates/compatibility-tests/tests/test_section_32_assertions_api.rs:153:5:
assertion failed: write_response.status().is_success()

---- test_read_assertions_when_none_exist stdout ----

thread 'test_read_assertions_when_none_exist' (1763965) panicked at crates/compatibility-tests/tests/test_section_32_assertions_api.rs:617:5:
ReadAssertions should succeed even when none exist

---- test_write_assertions_creates_assertions stdout ----

thread 'test_write_assertions_creates_assertions' (1763968) panicked at crates/compatibility-tests/tests/test_section_32_assertions_api.rs:90:5:
WriteAssertions should succeed, got: 404 Not Found

---- test_write_assertions_replaces_existing stdout ----

thread 'test_write_assertions_replaces_existing' (1763971) panicked at crates/compatibility-tests/tests/test_section_32_assertions_api.rs:301:5:
assertion failed: response.status().is_success()

---- test_write_empty_assertions stdout ----

thread 'test_write_empty_assertions' (1763973) panicked at crates/compatibility-tests/tests/test_section_32_assertions_api.rs:545:5:
Writing empty assertions should succeed


failures:
    test_assertions_mixed_expectations
    test_assertions_with_contextual_tuples
    test_read_assertions_returns_assertions
    test_read_assertions_when_none_exist
    test_write_assertions_creates_assertions
    test_write_assertions_replaces_existing
    test_write_empty_assertions

test result: FAILED. 2 passed; 7 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.25s

--- test_section_33_consistency_preference ---

running 9 tests
test test_batchcheck_accepts_consistency_parameter ... FAILED
test test_check_accepts_consistency_parameter ... FAILED
test test_check_with_higher_consistency ... FAILED
test test_check_with_unspecified_consistency ... FAILED
test test_consistency_modes_return_same_results ... FAILED
test test_expand_accepts_consistency_parameter ... FAILED
test test_invalid_consistency_value_error ... ok
test test_listobjects_accepts_consistency_parameter ... FAILED
test test_listusers_accepts_consistency_parameter ... FAILED

failures:

---- test_batchcheck_accepts_consistency_parameter stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_accepts_consistency_parameter stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_with_higher_consistency stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_check_with_unspecified_consistency stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_consistency_modes_return_same_results stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_expand_accepts_consistency_parameter stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_listobjects_accepts_consistency_parameter stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_listusers_accepts_consistency_parameter stdout ----
Error: Failed to write tuples: 500 Internal Server Error


failures:
    test_batchcheck_accepts_consistency_parameter
    test_check_accepts_consistency_parameter
    test_check_with_higher_consistency
    test_check_with_unspecified_consistency
    test_consistency_modes_return_same_results
    test_expand_accepts_consistency_parameter
    test_listobjects_accepts_consistency_parameter
    test_listusers_accepts_consistency_parameter

test result: FAILED. 1 passed; 8 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.27s

--- test_section_34_streamed_listobjects ---

running 5 tests
test test_streamed_listobjects_empty_results ... ok
test test_streamed_listobjects_error_handling ... ok
test test_streamed_listobjects_large_result_set ... ok
test test_streamed_listobjects_returns_same_as_listobjects ... ok
test test_streamed_listobjects_with_contextual_tuples ... ok

test result: ok. 5 passed; 0 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.08s

--- test_section_35_modular_models ---

running 7 tests
test test_create_model_schema_1_2 ... ok
test test_invalid_schema_version_error ... FAILED
test test_model_retrieval_includes_schema_version ... ok
test test_schema_1_2_backwards_compatible ... ok
test test_schema_1_2_computed_relation_compatibility ... ok
test test_schema_1_2_multi_type_model_compatibility ... ok
test test_schema_1_2_with_organization_type ... ok

failures:

---- test_invalid_schema_version_error stdout ----

thread 'test_invalid_schema_version_error' (1764152) panicked at crates/compatibility-tests/tests/test_section_35_modular_models.rs:340:5:
Creating model with invalid schema version should fail
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    test_invalid_schema_version_error

test result: FAILED. 6 passed; 1 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.24s

--- test_section_4 ---

running 9 tests
test test_delete_store_deletes_store ... ok
test test_delete_store_returns_400_for_nonexistent_store ... FAILED
test test_get_store_retrieves_store_by_id ... ok
test test_get_store_returns_400_for_nonexistent_store ... FAILED
test test_list_stores_continuation_token_works ... FAILED
test test_list_stores_respects_page_size_parameter ... FAILED
test test_list_stores_returns_paginated_results ... ok
test test_post_stores_creates_store_with_generated_id ... ok
test test_post_stores_returns_created_store_in_response ... ok

failures:

---- test_delete_store_returns_400_for_nonexistent_store stdout ----

thread 'test_delete_store_returns_400_for_nonexistent_store' (1764193) panicked at crates/compatibility-tests/tests/test_section_4.rs:244:5:
assertion `left == right` failed: DELETE non-existent store should return 400, got: 404 Not Found
  left: 404
 right: 400
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_get_store_returns_400_for_nonexistent_store stdout ----

thread 'test_get_store_returns_400_for_nonexistent_store' (1764197) panicked at crates/compatibility-tests/tests/test_section_4.rs:171:5:
assertion `left == right` failed: GET non-existent store should return 400, got: 404 Not Found
  left: 404
 right: 400

---- test_list_stores_continuation_token_works stdout ----

thread 'test_list_stores_continuation_token_works' (1764199) panicked at crates/compatibility-tests/tests/test_section_4.rs:380:10:
continuation_token should be present when more results exist

---- test_list_stores_respects_page_size_parameter stdout ----

thread 'test_list_stores_respects_page_size_parameter' (1764202) panicked at crates/compatibility-tests/tests/test_section_4.rs:335:5:
assertion `left == right` failed: Page size=3 should return exactly 3 stores, got: 173
  left: 173
 right: 3


failures:
    test_delete_store_returns_400_for_nonexistent_store
    test_get_store_returns_400_for_nonexistent_store
    test_list_stores_continuation_token_works
    test_list_stores_respects_page_size_parameter

test result: FAILED. 5 passed; 4 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.25s

--- test_section_5 ---

running 9 tests
test test_can_create_model_with_computed_relations ... ok
test test_can_create_model_with_direct_relations ... ok
test test_can_create_model_with_this_keyword ... ok
test test_can_create_model_with_wildcards ... ok
test test_duplicate_type_definitions_return_error ... FAILED
test test_invalid_model_syntax_returns_400 ... FAILED
test test_model_creation_returns_generated_model_id ... ok
test test_post_authorization_model_creates_model ... ok
test test_undefined_relation_references_return_error ... FAILED

failures:

---- test_duplicate_type_definitions_return_error stdout ----

thread 'test_duplicate_type_definitions_return_error' (1764294) panicked at crates/compatibility-tests/tests/test_section_5.rs:493:5:
assertion `left == right` failed: Duplicate type definitions should return 400, got: 201 Created
  left: 201
 right: 400
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_invalid_model_syntax_returns_400 stdout ----

thread 'test_invalid_model_syntax_returns_400' (1764296) panicked at crates/compatibility-tests/tests/test_section_5.rs:422:5:
assertion `left == right` failed: Invalid model should return 400, got: 422 Unprocessable Entity
  left: 422
 right: 400

---- test_undefined_relation_references_return_error stdout ----

thread 'test_undefined_relation_references_return_error' (1764302) panicked at crates/compatibility-tests/tests/test_section_5.rs:545:5:
assertion `left == right` failed: Undefined relation reference should return 400, got: 201 Created
  left: 201
 right: 400


failures:
    test_duplicate_type_definitions_return_error
    test_invalid_model_syntax_returns_400
    test_undefined_relation_references_return_error

test result: FAILED. 6 passed; 3 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.25s

--- test_section_6 ---

running 6 tests
test test_can_retrieve_latest_model ... ok
test test_get_authorization_model_retrieves_model ... ok
test test_get_nonexistent_model_returns_error ... ok
test test_list_authorization_models ... ok
test test_model_response_includes_schema_version ... ok
test test_model_response_includes_type_definitions ... ok

test result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.27s

--- test_section_7_tuple_write ---

running 10 tests
test test_can_delete_tuple ... FAILED
test test_conditional_writes ... FAILED
test test_write_invalid_format_returns_400 ... FAILED
test test_write_multiple_tuples ... FAILED
test test_write_nonexistent_relation_returns_error ... FAILED
test test_write_nonexistent_type_returns_error ... FAILED
test test_write_returns_empty_response ... FAILED
test test_write_single_tuple ... FAILED
test test_write_without_store_returns_error ... ok
test test_writes_are_idempotent ... FAILED

failures:

---- test_can_delete_tuple stdout ----

thread 'test_can_delete_tuple' (1764369) panicked at crates/compatibility-tests/tests/test_section_7_tuple_write.rs:229:5:
Setup: writing initial tuple should succeed
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_conditional_writes stdout ----

thread 'test_conditional_writes' (1764379) panicked at crates/compatibility-tests/tests/test_section_7_tuple_write.rs:460:5:
Conditional write should succeed, got: 500 Internal Server Error

---- test_write_invalid_format_returns_400 stdout ----

thread 'test_write_invalid_format_returns_400' (1764381) panicked at crates/compatibility-tests/tests/test_section_7_tuple_write.rs:331:5:
assertion `left == right` failed: Invalid tuple format should return 400, got: 422 Unprocessable Entity
  left: 422
 right: 400

---- test_write_multiple_tuples stdout ----

thread 'test_write_multiple_tuples' (1764383) panicked at crates/compatibility-tests/tests/test_section_7_tuple_write.rs:127:5:
Write multiple tuples should succeed, got: 500 Internal Server Error

---- test_write_nonexistent_relation_returns_error stdout ----

thread 'test_write_nonexistent_relation_returns_error' (1764385) panicked at crates/compatibility-tests/tests/test_section_7_tuple_write.rs:409:5:
assertion `left == right` failed: Writing tuple with non-existent relation should return 400, got: 500 Internal Server Error
  left: 500
 right: 400

---- test_write_nonexistent_type_returns_error stdout ----

thread 'test_write_nonexistent_type_returns_error' (1764387) panicked at crates/compatibility-tests/tests/test_section_7_tuple_write.rs:370:5:
assertion `left == right` failed: Writing tuple with non-existent type should return 400, got: 500 Internal Server Error
  left: 500
 right: 400

---- test_write_returns_empty_response stdout ----

thread 'test_write_returns_empty_response' (1764389) panicked at crates/compatibility-tests/tests/test_section_7_tuple_write.rs:80:5:
Response should be an empty object {}

---- test_write_single_tuple stdout ----

thread 'test_write_single_tuple' (1764391) panicked at crates/compatibility-tests/tests/test_section_7_tuple_write.rs:38:5:
Write should succeed, got: 500 Internal Server Error

---- test_writes_are_idempotent stdout ----

thread 'test_writes_are_idempotent' (1764396) panicked at crates/compatibility-tests/tests/test_section_7_tuple_write.rs:164:5:
First write should succeed


failures:
    test_can_delete_tuple
    test_conditional_writes
    test_write_invalid_format_returns_400
    test_write_multiple_tuples
    test_write_nonexistent_relation_returns_error
    test_write_nonexistent_type_returns_error
    test_write_returns_empty_response
    test_write_single_tuple
    test_writes_are_idempotent

test result: FAILED. 1 passed; 9 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.29s

--- test_section_8_tuple_read ---

running 9 tests
test test_read_continuation_token ... FAILED
test test_read_respects_page_size ... FAILED
test test_read_returns_empty_when_no_matches ... FAILED
test test_read_tuples_by_filter ... FAILED
test test_read_with_empty_filter ... FAILED
test test_read_with_multiple_filters ... FAILED
test test_read_with_object_filter ... FAILED
test test_read_with_relation_filter ... FAILED
test test_read_with_user_filter ... FAILED

failures:

---- test_read_continuation_token stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_read_respects_page_size stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_read_returns_empty_when_no_matches stdout ----
Error: error decoding response body

Caused by:
    expected value at line 1 column 1

---- test_read_tuples_by_filter stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_read_with_empty_filter stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_read_with_multiple_filters stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_read_with_object_filter stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_read_with_relation_filter stdout ----
Error: Failed to write tuples: 500 Internal Server Error

---- test_read_with_user_filter stdout ----
Error: Failed to write tuples: 500 Internal Server Error


failures:
    test_read_continuation_token
    test_read_respects_page_size
    test_read_returns_empty_when_no_matches
    test_read_tuples_by_filter
    test_read_with_empty_filter
    test_read_with_multiple_filters
    test_read_with_object_filter
    test_read_with_relation_filter
    test_read_with_user_filter

test result: FAILED. 0 passed; 9 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.28s

--- test_section_9_tuple_edge_cases ---

running 6 tests
test test_identifiers_at_size_limit ... FAILED
test test_identifiers_over_size_limit ... ok
test test_read_tuple_with_userset ... FAILED
test test_special_characters_in_identifiers ... FAILED
test test_unicode_in_identifiers ... FAILED
test test_write_tuple_with_wildcard ... FAILED

failures:

---- test_identifiers_at_size_limit stdout ----

thread 'test_identifiers_at_size_limit' (1764467) panicked at crates/compatibility-tests/tests/test_section_9_tuple_edge_cases.rs:158:5:
Write with IDs at size limits should succeed, got: 400 Bad Request
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_read_tuple_with_userset stdout ----

thread 'test_read_tuple_with_userset' (1764474) panicked at crates/compatibility-tests/tests/test_section_9_tuple_edge_cases.rs:78:5:
Writing userset tuple should succeed

---- test_special_characters_in_identifiers stdout ----

thread 'test_special_characters_in_identifiers' (1764476) panicked at crates/compatibility-tests/tests/test_section_9_tuple_edge_cases.rs:248:9:
Write with special chars (user:alice@example.com, document:my-doc) should succeed, got: 500 Internal Server Error

---- test_unicode_in_identifiers stdout ----

thread 'test_unicode_in_identifiers' (1764478) panicked at crates/compatibility-tests/tests/test_section_9_tuple_edge_cases.rs:299:9:
Write with Unicode (user:用户123, document:文档) should succeed, got: 500 Internal Server Error

---- test_write_tuple_with_wildcard stdout ----

thread 'test_write_tuple_with_wildcard' (1764480) panicked at crates/compatibility-tests/tests/test_section_9_tuple_edge_cases.rs:41:5:
Writing tuple with wildcard should succeed, got: 500 Internal Server Error


failures:
    test_identifiers_at_size_limit
    test_read_tuple_with_userset
    test_special_characters_in_identifiers
    test_unicode_in_identifiers
    test_write_tuple_with_wildcard

test result: FAILED. 1 passed; 5 failed; 0 ignored; 0 measured; 6 filtered out; finished in 0.26s

============================================================
TOTAL: 90 passed, 160 failed
============================================================
